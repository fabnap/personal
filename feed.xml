<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.4.1">Jekyll</generator><link href="www.fabrizionapolitano.it/feed.xml" rel="self" type="application/atom+xml"/><link href="www.fabrizionapolitano.it/" rel="alternate" type="text/html" hreflang="en"/><updated>2026-01-15T14:52:02+00:00</updated><id>www.fabrizionapolitano.it/feed.xml</id><title type="html">Fabrizio Napolitano</title><subtitle>This is the personal page of Fabrizio </subtitle><entry><title type="html">Cool VR visualization</title><link href="www.fabrizionapolitano.it/blog/2025/vr/" rel="alternate" type="text/html" title="Cool VR visualization"/><published>2025-11-26T00:00:16+00:00</published><updated>2025-11-26T00:00:16+00:00</updated><id>www.fabrizionapolitano.it/blog/2025/vr</id><content type="html" xml:base="www.fabrizionapolitano.it/blog/2025/vr/"><![CDATA[<p>This is a quick post to share my experience with Virtual Reality (VR) visualization, which I recently explored for scientific data representation.</p> <p>I did this a good while ago, but I think it is still relevant today. VR visualization can provide an immersive experience that allows users to interact with data in a more intuitive way.</p> <p>This is what we are going to do:</p> <ul> <li>first of all we need the 3D model of the object we want to visualize; in my case this was an HEP event from a Delphes simulation, but it can be anything else (a molecule, a building, etc.);</li> <li>then we need to convert this 3D model into a format that can be used in: glb or gltf; I used Blender and/or Python.</li> <li>then we need to make sure to produce the right QR code and to process it in a way it works.</li> <li>when you will scan the QR code with your phone, it will open a webpage that will load the 3D model in VR mode, which you can explore in VR.</li> </ul> <p>This is the precise steps I followed:</p> <ul> <li>create the .glb/.gltf file using Blender or Python (e.g. using the pygltflib library) (I give a python example to extract from Delphes and convert to glb below)</li> <li>upload the .glb/.gltf file to a web server or a cloud storage service (in my case github pages)</li> <li>produce the .html which loads the 3D model on github.</li> <li>make a public link to the .html file, for example using <a href="https://raw.githack.com/">https://raw.githack.com/</a> remember to use the raw version of the html file, and to use “production” mode in the link when you are done testing.</li> <li>generate the QR code that points to the .html file</li> <li>process the QR here <a href="https://hiukim.github.io/mind-ar-js-doc/tools/compile">https://hiukim.github.io/mind-ar-js-doc/tools/compile</a> so that you get a .mind file. When you scan the QR code, it will both open the webpage, load the 3D model and use the QR code itself to anchor the VR view.</li> <li>upload and link the .mind file in the same html folder and link it in the html code.</li> <li>Have fun visualizing in VR!</li> </ul> <p>The python code to extract from Delphes and convert to .glb is the following: <a href="https://gist.github.com/fabnap/a70cdbb1ef75339bed137afc5c4a775c">link to the full code</a></p> <p>My repo with some example: <a href="https://github.com/fabnap/VRjsTest">https://github.com/fabnap/VRjsTest</a></p> <p>Edit: sometimes the target image is not good enough to anchor the VR view, so you might want to try with different images or QR codes.</p> <p>Edit2: another solution to visualize the 3D model is to just view it online, see the html example here: https://github.com/fabnap/VRjsTest/blob/main/VBS_2.html</p>]]></content><author><name></name></author><category term="sample-posts"/><category term="useful"/><summary type="html"><![CDATA[A post about Virtual Reality (VR) visualization and how to build it.]]></summary></entry><entry><title type="html">A LaTeX alternative, Typst</title><link href="www.fabrizionapolitano.it/blog/2025/typst/" rel="alternate" type="text/html" title="A LaTeX alternative, Typst"/><published>2025-10-26T00:00:16+00:00</published><updated>2025-10-26T00:00:16+00:00</updated><id>www.fabrizionapolitano.it/blog/2025/typst</id><content type="html" xml:base="www.fabrizionapolitano.it/blog/2025/typst/"><![CDATA[<p>Today I want to introduce you to my brief experience with Typst, a modern typesetting system that aims to be a more user-friendly alternative to LaTeX. As someone who has used LaTeX extensively for academic writing and document preparation, I was intrigued by Typst’s promise of simplicity and ease of use. Actually I started using Typst for preparing some lecture notes and some proposal documents; mind you that many journals and conferences still require LaTeX submissions, so Typst is not yet a full replacement for LaTeX in all scenarios.</p> <p>There are few really positive aspects of Typst that I found particularly appealing:</p> <ul> <li>the markdown-like syntax, which makes it easy to learn and use, even for those who are not familiar with LaTeX;</li> <li>the incredible speed of compilation: Typst compiles documents almost instantaneously, which is a significant improvement over LaTeX, especially for large documents; if you have ever used Overleaf, you know how slow the compilation can be sometimes;</li> <li>the easiness of including packages and libraries: Typst has a built-in package manager that makes it easy to include additional functionality in your documents;</li> <li>the smallness of the installation: Typst is a lightweight application that can be installed quickly and easily on any system.</li> </ul> <p>I leave you to judge by yourself if Typst is a good alternative to LaTeX for your needs. For me for the moment it is rather a complement than a replacement, especially for quick documents and notes.</p> <p>Here are some useful links to get started with Typst:</p> <ul> <li><a href="https://typst.app/">Official Typst website</a></li> <li><a href="https://typst.app/docs/">Typst documentation</a></li> <li><a href="https://typst.app/docs/guides/for-latex-users/">Typst guide for LaTeX users</a></li> </ul> <p>Installation on MacOS is straightforward using Homebrew:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew install typst
</code></pre></div></div> <p>Actually you can also download the executable, move it to your <code class="language-plaintext highlighter-rouge">usr/local/bin</code> folder (and mark is safe for Mac with <code class="language-plaintext highlighter-rouge">xattr -d com.apple.quarantine typst</code>) and BOOM, you are good to go with <code class="language-plaintext highlighter-rouge">typst compile myfile.typ</code>.</p> <p>Here is a simple example of Typst code to create a document with a title, section, and some text:</p> <pre><code class="language-typst">= My First Typst Document
# Introduction
This is my first document created with Typst. It is easy to use and has a simple syntax.
</code></pre> <p>Cheers from CMS control room at CERN, no data was lost during the writing of this post!</p> <p>Edit: forgot to add the nice VSCode extension for Typst: Tinymist</p> <p>Edit 2: Tested a poster template in Typst, worked like a charm! https://jonaspleyer.github.io/peace-of-posters/</p>]]></content><author><name></name></author><category term="sample-posts"/><category term="useful"/><summary type="html"><![CDATA[A post about Typst, a modern typesetting system that aims to be a more user-friendly alternative to LaTeX.]]></summary></entry><entry><title type="html">Lo storico esperimento di Conversi, Pancini e Piccioni</title><link href="www.fabrizionapolitano.it/blog/2025/conversi/" rel="alternate" type="text/html" title="Lo storico esperimento di Conversi, Pancini e Piccioni"/><published>2025-06-02T00:00:16+00:00</published><updated>2025-06-02T00:00:16+00:00</updated><id>www.fabrizionapolitano.it/blog/2025/conversi</id><content type="html" xml:base="www.fabrizionapolitano.it/blog/2025/conversi/"><![CDATA[<p>Oggi voglio parlarvi di uno degli esperimenti storici e significativi della fisica delle particelle (e tutto italiano): l’esperimento di Conversi, Pancini e Piccioni, condotto nel 1947 presso l’Università di Roma. Questo esperimento ha avuto un impatto duraturo sulla nostra comprensione del muone e della sua interazione con la materia.</p> <p>Ma un po’ di storia prima di tutto: il muone è una particella subatomica simile all’elettrone, ma con una massa circa 200 volte maggiore. Fu scoperto nel 1936 da Carl D. Anderson e Seth Neddermeyer, che lo identificarono come un nuovo tipo di particella durante gli esperimenti con i raggi cosmici. Tuttavia, la sua natura e le sue proprietà erano ancora poco comprese: c’era ancora molta confusione.</p> <p>Prima della guerra, Yukawa aveva proposto l’esistenza di una particella mediatrice della forza nucleare, il mesone pi, che avrebbe dovuto essere responsabile dell’interazione tra i nucleoni. Mesone significa “che si trova nel mezzo”, tra le particelle leggere come gli elettroni e quelle pesanti come i nucleoni.</p> <p>Yukawa aveva previsto che il mesone pi (allora chiamato mesotrone) dovesse avere una massa di circa 100 MeV, semplicemente utilizzando il principio di indeterminazione di Heisenberg, e ponendo come il tempo di interazione tra i nucleoni alla distanza di un nucleone (1fm alla velocità della luce). Questo porta a una massa del mesone pi di circa 100 MeV, che era molto più alta della massa dell’elettrone 500 keV.</p> <p>Ma allora il muone, che veniva osservato nei raggi cosmici, era considerato un candidato per il mesone pi, poiché aveva una massa di circa 105 MeV. Tuttavia, nonostante le sue proprietà simili a quelle dell’elettrone, c’era un dettaglio importante che non quadrava, e che venne scoperto da Conversi, Pancini e Piccioni: il muone non interagiva con i nuclei atomici come ci si aspettava per il mesone pi, che essendo una particella mediatrice della forza nucleare, avrebbe dovuto interagire con i nucleoni in modo significativo.</p> <p>Conversi, Pancini e Piccioni osservarono che il muone non interagiva con i nuclei atomici come previsto, ma piuttosto veniva assorbito dai nuclei senza causare alcuna reazione nucleare. Questo portò alla conclusione che il muone non era il mesone pi, ma una particella diversa con proprietà uniche.</p> <p>Questo risultato fu fondamentale per la comprensione della fisica delle particelle e portò alla scoperta di altre particelle, come il mesone pi stesso, che fu successivamente identificato come una particella diversa con una massa di circa 140 MeV.</p> <p>Per altri dettagli sull’esperimento, vi consiglio questo link: <a href="https://www.aif.it/fisico/lesperimento-conversi-pancini-piccioni/">https://www.aif.it/fisico/lesperimento-conversi-pancini-piccioni/</a> che riporta anche delle difficoltà incontrate durante la guerra.</p>]]></content><author><name></name></author><category term="sample-posts"/><category term="dissemination"/><summary type="html"><![CDATA[Un post sull'esperimento di Conversi, Pancini e Piccioni, che ha portato avanti lo studio sul muone e la sua interazione con la materia.]]></summary></entry><entry><title type="html">How to get captive portals</title><link href="www.fabrizionapolitano.it/blog/2025/captive/" rel="alternate" type="text/html" title="How to get captive portals"/><published>2025-04-08T12:43:16+00:00</published><updated>2025-04-08T12:43:16+00:00</updated><id>www.fabrizionapolitano.it/blog/2025/captive</id><content type="html" xml:base="www.fabrizionapolitano.it/blog/2025/captive/"><![CDATA[<p>I just smashed my head against the wall for the n-th time trying to get a captive portal to work on my computer/smartphone. Every time I connect to a network which requires a captive portal, I spend good half an hour trying to figure out why the login browser disappear and how to get it back. Since I am right now waiting for CERN’s server to refresh configuration and allowing me to connect to the network, I thought I would write down a few tips on how to get captive portals to work.</p> <h3 id="what-is-a-captive-portal">What is a captive portal?</h3> <p>A captive portal is a web page that is displayed to newly connected users before they are granted broader access to network resources. It is often used in public Wi-Fi networks, such as those found in airports, hotels, and coffee shops, to present terms of service or to require users to log in or pay for access.</p> <h3 id="how-to-get-captive-portals-to-work">How to get captive portals to work?</h3> <p>Just connect to one of these links: http://captive.apple.com/ neverssl.com</p> <p>There are more! So far these are fine. Cheers</p>]]></content><author><name></name></author><category term="sample-posts"/><category term="useful"/><summary type="html"><![CDATA[When your internet connection is blocked by a captive portal]]></summary></entry><entry><title type="html">The successor of pip in python</title><link href="www.fabrizionapolitano.it/blog/2025/python_uv/" rel="alternate" type="text/html" title="The successor of pip in python"/><published>2025-03-31T08:43:16+00:00</published><updated>2025-03-31T08:43:16+00:00</updated><id>www.fabrizionapolitano.it/blog/2025/python_uv</id><content type="html" xml:base="www.fabrizionapolitano.it/blog/2025/python_uv/"><![CDATA[<p>Ever felt like python’s pip package is unnecessarily slow? Also using venv is a bit of a hassle, right? Then <a href="https://github.com/astral-sh/uv">uv</a> is the solution for you. It is a new package manager for python that is faster than pip (it is written in Rust) and has a lot of other features. Minimal guide to get started with uv:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python3.11 <span class="nt">-m</span> pip <span class="nb">install </span>uv <span class="c"># or your python version</span>

uv init <span class="nb">.</span> <span class="c"># initialize this directory</span>

uv python pin 3.11 <span class="c"># change preferred python version</span>

uv add jetimage-processor <span class="c"># add package</span>
uv pip freeze <span class="c"># check packages</span>

<span class="c"># run stuff </span>
uv run main.py
uv run myscript 
</code></pre></div></div> <p>Whatever you run with uv will be run in a virtual environment, so you don’t have to worry about that. You can also use uv to run scripts, and it will automatically create a virtual environment for you.</p> <p>I think for me this is a game changer, and I will use it from now on. I hope you find it useful too!</p>]]></content><author><name></name></author><category term="sample-posts"/><category term="useful"/><summary type="html"><![CDATA[How to use uv to install python packages]]></summary></entry><entry><title type="html">PDF viewer in firefox</title><link href="www.fabrizionapolitano.it/blog/2024/pdfdownload/" rel="alternate" type="text/html" title="PDF viewer in firefox"/><published>2024-10-21T08:43:16+00:00</published><updated>2024-10-21T08:43:16+00:00</updated><id>www.fabrizionapolitano.it/blog/2024/pdfdownload</id><content type="html" xml:base="www.fabrizionapolitano.it/blog/2024/pdfdownload/"><![CDATA[<p>Just wanted to make a short post on this situation which had me annoyed for a long time. Sometimes you are browsing the web, and you find a PDF file you want to read, but you don’t want to download it (for me, it’s like 90% of the time). If I wanted it downloaded then I would have clicked on the download button, right? Now Firefox (which is my browser of choice) has a built-in PDF viewer, which works great.</p> <p>Some websites, however, have a script that forces the download of the PDF file, which is annoying. I saw that associated most of the times to PHP pages that serve the PDF file; in the end I got tired of manually deleting the download from the download folder, so I looked for a solution.</p> <p>Luckily I found a nice add-on for Firefox that does the trick: <a href="https://addons.mozilla.org/it/firefox/addon/no-pdf-download/">No PDF Download</a>; but I think all other browsers have similar add-ons.</p> <p>Thank me later, and happy browsing!</p>]]></content><author><name></name></author><category term="sample-posts"/><category term="useful"/><summary type="html"><![CDATA[How to prevent pdf download in firefox]]></summary></entry><entry><title type="html">Lambda function to send an email</title><link href="www.fabrizionapolitano.it/blog/2024/lambda/" rel="alternate" type="text/html" title="Lambda function to send an email"/><published>2024-09-09T08:43:16+00:00</published><updated>2024-09-09T08:43:16+00:00</updated><id>www.fabrizionapolitano.it/blog/2024/lambda</id><content type="html" xml:base="www.fabrizionapolitano.it/blog/2024/lambda/"><![CDATA[<p>Sometimes there are actions which are repetitive and can be automated. For example, looking for job openings in a specific field can be very time consuming. In my country, all public selections ongoing ( at labs or universities ) are published on a specific website, and people check twice per week if there is something new. Unfortunately, the website does not have any filter operations, and you have to scroll down the list of all the selections to see if there is something relevant for you.</p> <p>Relevant <a href="https://xkcd.com/1319/">xkcd</a>.</p> <p>In this post, I will explain how to use AWS’s lambda function to send an email to yourself after parsing the pdf published on a website. For those who are not familiar with AWS, it is a cloud service provider, and lambda is a service that allows you to run code without provisioning or managing servers. Lambda is a serverless computing service, and you can run your code for virtually any type of application or backend service with zero administration.</p> <p>This are the relevant steps:</p> <ul> <li>Get a AWS account; it will be free for the first months</li> <li>Create a lambda function. You can use the AWS console, or the AWS CLI, I did use the console.</li> </ul> <p>For the lambda function, the best is to create a virtual envirnonment with the libraries you need, and then zip it and upload it to the lambda function. This is how it goes:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>my_lambda
<span class="nb">cd </span>my_lambda
python3 <span class="nt">-m</span> venv my_lambda
<span class="nb">source </span>my_lambda/bin/activate
pip <span class="nb">install </span>requests PyPDF2 <span class="c"># the two libraries I need</span>
<span class="nb">cd </span>vev/lib/python3.11/site-packages
</code></pre></div></div> <p>Now, after you have the libraries you can add the <code class="language-plaintext highlighter-rouge">lambda_function.py</code> file, which is the code you want to run. In my case, I want to parse a pdf and send an email if there is a new selection.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">json</span>
<span class="kn">import</span> <span class="n">requests</span>
<span class="kn">import</span> <span class="n">PyPDF2</span> <span class="c1"># for the parsing of the pdf
</span><span class="kn">import</span> <span class="n">boto3</span> <span class="c1"># for the email service
</span><span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="n">io</span>

<span class="n">ses</span> <span class="o">=</span> <span class="n">boto3</span><span class="p">.</span><span class="nf">client</span><span class="p">(</span><span class="sh">'</span><span class="s">ses</span><span class="sh">'</span><span class="p">)</span> <span class="c1"># simple email service, needs further configuration on the AWS console
</span>
<span class="c1"># function to send an email
</span><span class="k">def</span> <span class="nf">sendEmail</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="sh">'</span><span class="s">testmail</span><span class="sh">'</span><span class="p">,</span><span class="n">body</span><span class="o">=</span><span class="sh">'</span><span class="s">testmail</span><span class="sh">'</span><span class="p">):</span>

    <span class="n">ses</span><span class="p">.</span><span class="nf">send_email</span><span class="p">(</span>
	    <span class="n">Source</span> <span class="o">=</span> <span class="sh">'</span><span class="s">your@email.com</span><span class="sh">'</span><span class="p">,</span>
	    <span class="n">Destination</span> <span class="o">=</span> <span class="p">{</span>
		    <span class="sh">'</span><span class="s">ToAddresses</span><span class="sh">'</span><span class="p">:</span> <span class="p">[</span>
			    <span class="sh">'</span><span class="s">your@email.com</span><span class="sh">'</span>
		    <span class="p">]</span>
	    <span class="p">},</span>
	    <span class="n">Message</span> <span class="o">=</span> <span class="p">{</span>
		    <span class="sh">'</span><span class="s">Subject</span><span class="sh">'</span><span class="p">:</span> <span class="p">{</span>
			    <span class="sh">'</span><span class="s">Data</span><span class="sh">'</span><span class="p">:</span> <span class="n">subject</span><span class="p">,</span>
			    <span class="sh">'</span><span class="s">Charset</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">UTF-8</span><span class="sh">'</span>
		    <span class="p">},</span>
		    <span class="sh">'</span><span class="s">Body</span><span class="sh">'</span><span class="p">:</span> <span class="p">{</span>
			    <span class="sh">'</span><span class="s">Text</span><span class="sh">'</span><span class="p">:{</span>
				    <span class="sh">'</span><span class="s">Data</span><span class="sh">'</span><span class="p">:</span> <span class="n">body</span><span class="p">,</span>
				    <span class="sh">'</span><span class="s">Charset</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">UTF-8</span><span class="sh">'</span>
			    <span class="p">}</span>
		    <span class="p">}</span>
	    <span class="p">}</span>
    <span class="p">)</span>

<span class="c1"># lets setup some useful functions
</span><span class="k">def</span> <span class="nf">download_pdf</span><span class="p">(</span><span class="n">pdf_url</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">pdf_url</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">io</span><span class="p">.</span><span class="nc">BytesIO</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">content</span><span class="p">)</span>  <span class="c1"># Return a BytesIO object to avoid saving to disk
</span>
<span class="k">def</span> <span class="nf">extract_text_from_pdf</span><span class="p">(</span><span class="n">pdf_bytes</span><span class="p">):</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">PyPDF2</span><span class="p">.</span><span class="nc">PdfReader</span><span class="p">(</span><span class="n">pdf_bytes</span><span class="p">)</span>
    <span class="n">text</span> <span class="o">=</span> <span class="sh">''</span>
    <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">.</span><span class="n">pages</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">+=</span> <span class="n">page</span><span class="p">.</span><span class="nf">extract_text</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">text</span>
    
<span class="c1"># i  need this cause the text will be sent per email, and i basically need to format a string
</span><span class="k">def</span> <span class="nf">format_search_results</span><span class="p">(</span><span class="n">search_results</span><span class="p">):</span>
    <span class="n">result_str</span> <span class="o">=</span> <span class="sh">""</span>
    <span class="k">for</span> <span class="n">keyword</span><span class="p">,</span> <span class="n">details</span> <span class="ow">in</span> <span class="n">search_results</span><span class="p">.</span><span class="nf">items</span><span class="p">():</span>
        <span class="c1"># Add the keyword and occurrences
</span>        <span class="n">result_str</span> <span class="o">+=</span> <span class="sa">f</span><span class="sh">"</span><span class="s">Keyword: </span><span class="sh">'</span><span class="si">{</span><span class="n">keyword</span><span class="si">}</span><span class="sh">'</span><span class="s">, Occurrences: </span><span class="si">{</span><span class="n">details</span><span class="p">[</span><span class="sh">'</span><span class="s">count</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="sh">"</span>
        <span class="n">result_str</span> <span class="o">+=</span> <span class="sh">"</span><span class="s">Snippets:</span><span class="se">\n</span><span class="sh">"</span>
        
        <span class="c1"># Add each snippet with a new line
</span>        <span class="k">for</span> <span class="n">snippet</span> <span class="ow">in</span> <span class="n">details</span><span class="p">[</span><span class="sh">'</span><span class="s">snippets</span><span class="sh">'</span><span class="p">]:</span>
            <span class="n">result_str</span> <span class="o">+=</span> <span class="sa">f</span><span class="sh">"</span><span class="s">- </span><span class="si">{</span><span class="n">snippet</span><span class="si">}</span><span class="se">\n</span><span class="sh">"</span>
        
        <span class="c1"># Add a newline for better separation between keywords
</span>        <span class="n">result_str</span> <span class="o">+=</span> <span class="sh">"</span><span class="se">\n</span><span class="sh">"</span>
    
    <span class="k">return</span> <span class="n">result_str</span>

<span class="c1"># Fixed-date public holidays in Italy. On these dates, the Gazzetta Ufficiale is not published.
</span><span class="k">def</span> <span class="nf">is_fixed_holiday</span><span class="p">(</span><span class="n">date_to_check</span><span class="p">):</span>
    <span class="n">year</span> <span class="o">=</span> <span class="n">date_to_check</span><span class="p">.</span><span class="n">year</span>
    <span class="n">fixed_holidays</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">datetime</span><span class="p">.</span><span class="nf">date</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>   <span class="c1"># New Year's Day
</span>        <span class="n">datetime</span><span class="p">.</span><span class="nf">date</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>   <span class="c1"># Epiphany
</span>        <span class="n">datetime</span><span class="p">.</span><span class="nf">date</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">25</span><span class="p">),</span>  <span class="c1"># Liberation Day
</span>        <span class="n">datetime</span><span class="p">.</span><span class="nf">date</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>   <span class="c1"># Labor Day
</span>        <span class="n">datetime</span><span class="p">.</span><span class="nf">date</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>   <span class="c1"># Republic Day
</span>        <span class="n">datetime</span><span class="p">.</span><span class="nf">date</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>  <span class="c1"># Assumption Day (Ferragosto)
</span>        <span class="n">datetime</span><span class="p">.</span><span class="nf">date</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>  <span class="c1"># All Saints' Day
</span>        <span class="n">datetime</span><span class="p">.</span><span class="nf">date</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>  <span class="c1"># Feast of the Immaculate Conception
</span>        <span class="n">datetime</span><span class="p">.</span><span class="nf">date</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">25</span><span class="p">),</span> <span class="c1"># Christmas Day
</span>        <span class="n">datetime</span><span class="p">.</span><span class="nf">date</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">26</span><span class="p">)</span>  <span class="c1"># St. Stephen's Day
</span>    <span class="p">}</span>
    
    <span class="c1"># Check if the date is in the set of fixed holidays
</span>    <span class="k">return</span> <span class="n">date_to_check</span> <span class="ow">in</span> <span class="n">fixed_holidays</span>

<span class="c1"># the function to count the number of tuesdays and fridays from the beginning of the year
# this is needed because the gazzetta number is the sum of the two
</span><span class="k">def</span> <span class="nf">count_fridays_and_tuesdays</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">):</span>
    <span class="c1"># Initialize counters
</span>    <span class="n">friday_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">tuesday_count</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># Iterate over each date between start_date and end_date
</span>    <span class="n">current_date</span> <span class="o">=</span> <span class="n">start_date</span>
    <span class="k">while</span> <span class="n">current_date</span> <span class="o">&lt;=</span> <span class="n">end_date</span><span class="p">:</span>
        <span class="k">if</span> <span class="nf">is_fixed_holiday</span><span class="p">(</span><span class="n">current_date</span><span class="p">):</span> <span class="c1"># Skip fixed holidays
</span>            <span class="k">pass</span>
        <span class="k">elif</span> <span class="n">current_date</span><span class="p">.</span><span class="nf">weekday</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># Tuesday (weekday() == 1)
</span>            <span class="n">tuesday_count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">current_date</span><span class="p">.</span><span class="nf">weekday</span><span class="p">()</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>  <span class="c1"># Friday (weekday() == 4)
</span>            <span class="n">friday_count</span> <span class="o">+=</span> <span class="mi">1</span>
        
        <span class="c1"># Move to the next day
</span>        <span class="n">current_date</span> <span class="o">+=</span> <span class="n">datetime</span><span class="p">.</span><span class="nf">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">friday_count</span><span class="p">,</span> <span class="n">tuesday_count</span>

<span class="c1"># function to search for keywords in the text
</span><span class="k">def</span> <span class="nf">search_keywords</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">keywords</span><span class="p">,</span> <span class="n">snippet_radius</span><span class="o">=</span><span class="mi">50</span><span class="p">):</span>
    <span class="c1"># Convert the entire text to lowercase for case-insensitive search
</span>    <span class="n">lower_text</span> <span class="o">=</span> <span class="n">text</span><span class="p">.</span><span class="nf">lower</span><span class="p">()</span>
    
    <span class="c1"># Store results for each keyword
</span>    <span class="n">results</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">keyword</span> <span class="ow">in</span> <span class="n">keywords</span><span class="p">:</span>
        <span class="c1"># Initialize list to hold snippets for this keyword
</span>        <span class="n">snippets</span> <span class="o">=</span> <span class="p">[]</span>
        
        <span class="c1"># Convert keyword to lowercase for case-insensitive search
</span>        <span class="n">lower_keyword</span> <span class="o">=</span> <span class="n">keyword</span><span class="p">.</span><span class="nf">lower</span><span class="p">()</span>

        <span class="c1"># Find occurrences of the keyword in the text
</span>        <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="c1"># Find the next occurrence of the keyword
</span>            <span class="n">index</span> <span class="o">=</span> <span class="n">lower_text</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">lower_keyword</span><span class="p">,</span> <span class="n">start</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="k">break</span>  <span class="c1"># No more occurrences
</span>
            <span class="c1"># Determine snippet boundaries
</span>            <span class="n">start_index</span> <span class="o">=</span> <span class="nf">max</span><span class="p">(</span><span class="n">index</span> <span class="o">-</span> <span class="n">snippet_radius</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">end_index</span> <span class="o">=</span> <span class="nf">min</span><span class="p">(</span><span class="n">index</span> <span class="o">+</span> <span class="nf">len</span><span class="p">(</span><span class="n">keyword</span><span class="p">)</span> <span class="o">+</span> <span class="n">snippet_radius</span><span class="p">,</span> <span class="nf">len</span><span class="p">(</span><span class="n">text</span><span class="p">))</span>

            <span class="c1"># Extract the snippet from the original text (not the lowercase version)
</span>            <span class="n">snippet</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">text</span><span class="p">[</span><span class="n">start_index</span><span class="p">:</span><span class="n">index</span><span class="p">]</span> <span class="o">+</span> <span class="sh">"</span><span class="s">[</span><span class="sh">"</span> <span class="o">+</span> <span class="n">text</span><span class="p">[</span><span class="n">index</span><span class="p">:</span><span class="n">index</span> <span class="o">+</span> <span class="nf">len</span><span class="p">(</span><span class="n">keyword</span><span class="p">)]</span> <span class="o">+</span> <span class="sh">"</span><span class="s">]</span><span class="sh">"</span> <span class="o">+</span> <span class="n">text</span><span class="p">[</span><span class="n">index</span> <span class="o">+</span> <span class="nf">len</span><span class="p">(</span><span class="n">keyword</span><span class="p">):</span><span class="n">end_index</span><span class="p">]</span>
            <span class="p">)</span>
            
            <span class="n">snippets</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">snippet</span><span class="p">)</span>

            <span class="c1"># Update start position to continue searching after the current keyword
</span>            <span class="n">start</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="nf">len</span><span class="p">(</span><span class="n">keyword</span><span class="p">)</span>

        <span class="c1"># Store the snippets and the total count of occurrences for each keyword
</span>        <span class="n">results</span><span class="p">[</span><span class="n">keyword</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="sh">'</span><span class="s">count</span><span class="sh">'</span><span class="p">:</span> <span class="nf">len</span><span class="p">(</span><span class="n">snippets</span><span class="p">),</span>
            <span class="sh">'</span><span class="s">snippets</span><span class="sh">'</span><span class="p">:</span> <span class="n">snippets</span>
        <span class="p">}</span>
    
    <span class="k">return</span> <span class="n">results</span>

<span class="c1"># this is the main function
</span><span class="k">def</span> <span class="nf">lambda_handler</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="c1"># create url for the pdf
</span>    <span class="c1"># get year month day and gazzetta number from the actual date 
</span>    <span class="n">today</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">date</span><span class="p">.</span><span class="nf">today</span><span class="p">()</span>
    <span class="c1"># today = datetime.date(2024, 9, 3)
</span>    <span class="n">year</span> <span class="o">=</span> <span class="n">today</span><span class="p">.</span><span class="n">year</span>
    <span class="n">month</span> <span class="o">=</span> <span class="n">today</span><span class="p">.</span><span class="n">month</span>
    <span class="n">day</span> <span class="o">=</span> <span class="n">today</span><span class="p">.</span><span class="n">day</span>

    <span class="c1"># the variable gazzetta, is the number of the gazzetta, counted as the number of tuesdays and friday from the beginning of the year
</span>    <span class="n">start_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="nf">date</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="n">end_date</span> <span class="o">=</span> <span class="n">today</span>
    <span class="n">friday_count</span><span class="p">,</span> <span class="n">tuesday_count</span> <span class="o">=</span> <span class="nf">count_fridays_and_tuesdays</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span>
    <span class="n">gazzetta</span> <span class="o">=</span> <span class="n">friday_count</span> <span class="o">+</span> <span class="n">tuesday_count</span> 

    <span class="c1"># in my case i can alogrithmically create the url. I want the lambda to get the pdf from the correct url at the give time of the month
</span>    <span class="n">pdf_url</span> <span class="o">=</span> <span class="sh">'</span><span class="s">https://www.gazzettaufficiale.it/do/gazzetta/downloadPdf?dataPubblicazioneGazzetta=</span><span class="sh">'</span> <span class="o">+</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">year</span><span class="si">:</span><span class="mi">04</span><span class="si">}{</span><span class="n">month</span><span class="si">:</span><span class="mi">02</span><span class="si">}{</span><span class="n">day</span><span class="si">:</span><span class="mi">02</span><span class="si">}</span><span class="sh">"</span><span class="o">+</span><span class="sh">'</span><span class="s">&amp;numeroGazzetta=</span><span class="sh">'</span><span class="o">+</span><span class="nf">str</span><span class="p">(</span><span class="n">gazzetta</span><span class="p">)</span><span class="o">+</span><span class="sh">'</span><span class="s">&amp;tipoSerie=S4&amp;tipoSupplemento=GU&amp;numeroSupplemento=0&amp;progressivo=0&amp;estensione=pdf&amp;edizione=0</span><span class="sh">'</span>

    <span class="c1"># the keywords I am looking for
</span>    <span class="n">keywords</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">PHYS-01</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">ISTITUTO NAZIONALE DI ASTROFISICA</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">ISTUTUTO NAZIONALE DI FISICA NUCLEARE</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">AGENZIA SPAZIALE ITALIANA</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">ENEA</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">AGENZIA NAZIONALE PER LE NUOVE TECNOLOGIE</span><span class="sh">'</span><span class="p">]</span>

    <span class="n">response</span> <span class="o">=</span> <span class="sh">''</span>

    <span class="c1"># Download PDF and extract text
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">pdf_bytes</span> <span class="o">=</span> <span class="nf">download_pdf</span><span class="p">(</span><span class="n">pdf_url</span><span class="p">)</span>
        <span class="n">pdf_text</span> <span class="o">=</span> <span class="nf">extract_text_from_pdf</span><span class="p">(</span><span class="n">pdf_bytes</span><span class="p">)</span>

        <span class="c1"># Search keywords
</span>        <span class="n">search_results</span> <span class="o">=</span> <span class="nf">search_keywords</span><span class="p">(</span><span class="n">pdf_text</span><span class="p">,</span> <span class="n">keywords</span><span class="p">)</span>

        <span class="c1"># format the response
</span>        <span class="n">response</span> <span class="o">=</span> <span class="sh">"</span><span class="s">Gazzetta URL: </span><span class="sh">"</span> <span class="o">+</span> <span class="n">pdf_url</span> <span class="o">+</span> <span class="sh">"</span><span class="se">\n\n</span><span class="sh">"</span>
        <span class="n">response</span> <span class="o">+=</span> <span class="nf">format_search_results</span><span class="p">(</span><span class="n">search_results</span><span class="p">)</span>
        <span class="nf">sendEmail</span><span class="p">(</span><span class="sh">'</span><span class="s">Recap da Gazzetta Ufficiale</span><span class="sh">'</span><span class="p">,</span><span class="n">response</span><span class="p">)</span>

        
    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="sh">'</span><span class="s">statusCode</span><span class="sh">'</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">body</span><span class="sh">'</span><span class="p">:</span> <span class="n">json</span><span class="p">.</span><span class="nf">dumps</span><span class="p">({</span>
                <span class="sh">'</span><span class="s">message</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">An error occurred.</span><span class="sh">'</span><span class="p">,</span>
                <span class="sh">'</span><span class="s">error</span><span class="sh">'</span><span class="p">:</span> <span class="nf">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="p">})</span>
        <span class="p">}</span>
</code></pre></div></div> <p>then you can zip the folder and upload it to the lambda function.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>zip <span class="nt">-r</span> my_lambda.zip <span class="nb">.</span>
</code></pre></div></div> <p>and then upload it to the lambda function (in the Code section of lambda).</p> <ul> <li> <p>to create a trigger, you can use a CloudWatch Event, which is a service that allows you to schedule when your lambda function should run. You can create a rule that triggers the lambda function at a specific time or at a specific interval. I want to creat the trigger at 20h00 of every Tuesday and Friday, cause the website is updated on those days. Can use a cron expression to specify the schedule. The cron expression for 20h00 on Tuesday and Friday is <code class="language-plaintext highlighter-rouge">0 20 ? * TUE,FRI *</code>.</p> </li> <li> <p>Finally you have to allow the perimission of the Lambda to use the SES service, which is the email service of AWS. You can do this in the IAM section of the AWS console. Go to IAM -&gt; Policies and create a policy with the following json</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"Version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-10-17"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"Statement"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
          </span><span class="nl">"Effect"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allow"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"Action"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="s2">"ses:SendEmail"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"ses:SendRawEmail"</span><span class="w">
          </span><span class="p">],</span><span class="w">
          </span><span class="nl">"Resource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="w">
      </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div> </div> <p>also add to your policy AWSLambdaBasicExecutionRole if not there.</p> </li> </ul> <p>Then go to your lambda function, Configuration-&gt;Permissions and attach the policy you just created.</p> <p>This should be it!</p> <p>Now if the function works correctly you will receive an email with the text of the pdf, and you can check if there is something relevant for you.</p> <p>Here is my nice example (the snippets are not very useful in this case, but you get the idea):</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/emailexample-480.webp"/> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/emailexample-800.webp"/> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/emailexample-1400.webp"/> <img src="/assets/img/emailexample.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <p>As a final note, be very careful of the costs of the lambda function, as it can be very expensive if you do not set the correct limits. You can set the limits in the Configuration section of the lambda function. In general it is very inexpensive to run, but be aware that pontially misconfigurations could be very costly.</p>]]></content><author><name></name></author><category term="sample-posts"/><category term="useful"/><summary type="html"><![CDATA[How to send use AWS lambda, a demonstration]]></summary></entry><entry><title type="html">Telegram bots</title><link href="www.fabrizionapolitano.it/blog/2024/telegram/" rel="alternate" type="text/html" title="Telegram bots"/><published>2024-09-06T08:40:16+00:00</published><updated>2024-09-06T08:40:16+00:00</updated><id>www.fabrizionapolitano.it/blog/2024/telegram</id><content type="html" xml:base="www.fabrizionapolitano.it/blog/2024/telegram/"><![CDATA[<p>Want to share a nice project which I have been working on in the last years: a telegram bot to monitor the status of the SIDDHARTA-2 experiment at the DAFNE accelerator.</p> <p>The bot is able to send messages to a telegram group, to a single user, and to send images and plots. The bot is also able to receive commands from the users and to send the data to a database. It is written in Python and uses the python-telegram-bot library.</p> <p>It was used by tens of shifters from different countries over the course of few years, and with it the reaction time was noticeably increased.</p> <p>You can find the repo <a href="https://github.com/fabnap/telegram_bot_monitor">here</a>.</p>]]></content><author><name></name></author><category term="sample-posts"/><category term="useful"/><summary type="html"><![CDATA[A repo from my telegram bots]]></summary></entry><entry><title type="html">Create personal webpages</title><link href="www.fabrizionapolitano.it/blog/2024/gitpages/" rel="alternate" type="text/html" title="Create personal webpages"/><published>2024-07-19T08:40:16+00:00</published><updated>2024-07-19T08:40:16+00:00</updated><id>www.fabrizionapolitano.it/blog/2024/gitpages</id><content type="html" xml:base="www.fabrizionapolitano.it/blog/2024/gitpages/"><![CDATA[<p>In this post, I will show you how to create your personal webpages and host them with GitHub Pages, and how to secure it.</p> <p>GitHub Pages is a great way to host your personal webpages. You can create a repository and push your HTML, CSS, and JavaScript files there. GitHub will take care of the rest.</p> <p>This website is realized through al-folio https://github.com/alshedivat/al-folio, a Jekyll theme for academics. You can fork it and modify it to your needs. It allows writing things in markdown, and it is very easy to use.</p> <p>So the configuration is a bit cumbersome, especially if you are not familiar with this kind of stuff. This is a short guide to help you set up your personal webpages.</p> <ul> <li>Clone the al-folio repository on your local machine</li> <li>From git website, click on settings/pages and select deploy from branch</li> <li>You can now access your website at https://yourusername.github.io !</li> </ul> <p>The details are on the <a href="https://docs.github.com/en/pages/getting-started-with-github-pages/creating-a-github-pages-site">github guide</a></p> <p>The real overhead starts when you want to add a custom website: wouldn’t it be nicer if you have your www.mywebsite.it instead of the github thing? These are the steps:</p> <ul> <li>Buy a domain name from a provider <ul> <li>watch out not to expose your personal data in the whois database</li> </ul> </li> <li>Now you need to tell your website that the actual site is on GitHub Pages. You need to add a CNAME file in your repository with the domain name you bought. <ul> <li>First write your domain name in the same settings/pages</li> </ul> </li> <li>Go to your provider DNS setting</li> <li>Add the following to the <code class="language-plaintext highlighter-rouge">A</code> record to tell the DNS to point to the GitHub Pages servers: <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>185.199.108.153
185.199.109.153
185.199.110.153
185.199.111.153
</code></pre></div> </div> </li> <li>Add similarly for the <code class="language-plaintext highlighter-rouge">AAAA</code> record: <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2606:50c0:8000::153
2606:50c0:8001::153
2606:50c0:8002::153
2606:50c0:8003::153
</code></pre></div> </div> </li> <li>This is important: the <code class="language-plaintext highlighter-rouge">CNAME</code> record. It tells the DNS that the domain name is an alias of the GitHub Pages site. Create a CNAME record to point www.mywebsite.it to YOUR-GITHUB-USERNAME.github.io. Note the YOUR-GITHUB-USERNAME NOT the GitHub repo name! It is a bit provider-dependent, for example in my case I have: <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>host name: www
value: YOUR-GITHUB-USERNAME.github.io
</code></pre></div> </div> </li> <li>Verify your domain <a href="https://github.com/settings/pages">on the git page</a>. <ul> <li>This means you have to add a TXT record with the value of the verification code provided by GitHub in your DNS.</li> </ul> </li> <li>(Optionally) do the same with Google search console to have your website indexed by google.</li> </ul> <p>Be careful to the DNS propagation, it can take up to 48 hours, in reality expect at least good 30 minutes.</p> <p>These are the details <a href="https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site">from git</a> Some resources for Aruba here <a href="https://www.uncledan.it/2018-09-07-github-pages-con-dns-aruba-si-puo-fare.html">italian</a></p> <p>As a final note, be careful to follow the guide, or inconvenient things, such as subdomain takeover could take place which happened to me. This is how it goes for the curious.</p> <p>Sometimes the provider has some default <code class="language-plaintext highlighter-rouge">CNAME</code> for services it often offers. For example, in my case it usually sells a full Linux machine together with the domain name (which I did not need and did not buy). Then the provider had a default <code class="language-plaintext highlighter-rouge">CNAME</code> record for the ftp server (this is used to move files on the net). Then the funny thing happened: someone created a git page named ftp.fabrizionapolitano.it, but my settings were pointing to the ftp server of the provider, so actually navigating that page gave a sort of game scam (I presume) website. I realized this because the hijacker actually registered the ftp domain with the Google search console, and I got a notification. Quick fix: remove the ftp <code class="language-plaintext highlighter-rouge">CNAME</code> record and actually verify the domain <a href="https://github.com/settings/pages">on the git page</a> (which I forgot to do).</p> <p>Some helpful discussion on git <a href="https://github.com/orgs/community/discussions/29068">here</a></p>]]></content><author><name></name></author><category term="sample-posts"/><category term="useful"/><summary type="html"><![CDATA[Host them with GitHub Pages]]></summary></entry><entry><title type="html">Reveal.js presentations</title><link href="www.fabrizionapolitano.it/blog/2024/reveal/" rel="alternate" type="text/html" title="Reveal.js presentations"/><published>2024-06-30T14:40:16+00:00</published><updated>2024-06-30T14:40:16+00:00</updated><id>www.fabrizionapolitano.it/blog/2024/reveal</id><content type="html" xml:base="www.fabrizionapolitano.it/blog/2024/reveal/"><![CDATA[<p>Sometimes you can just copy some plots on a blank slide and present them. This is a great way to present your work. I do this all the time for internal meetings, where the focus is the technical details. Some other times, you want to present your work in a more engaging way, with animations, transitions, and interactive plots.</p> <p>I personally don’t particularly like MS PowerPoint, and I don’t like Google Slides either, even though they are great tools overall. I tested some time ago <a href="https://revealjs.com/">Reveal.js</a>, and I got very impressed by the quality of the presentations you can make with it, also confirmed by the audience feedback.</p> <p>The tutorial is very well-made on the website, and you can start from there. However, you need basically to write some HTML code, and this can be a bit cumbersome for some. For me, it was a nice experience, and I learned a lot about HTML, CSS and JavaScript, but I understand that not everyone has the time or the interest to do so.</p> <p>You can see my presentation “Statistical Methods for Particle and Nuclear Physics - a short tour” I gave at the ECT* Exotico workshop in 2022 <a href="https://www.fabrizionapolitano.it/assets/various/reveal.js-master/index.html">here</a>. You can actually access the source code of this presentation with ctrl+u (at least on firefox), and you can see how I made it.</p> <p>The cool video at the beginning is added with</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;section</span>  <span class="na">data-background-video=</span><span class="s">"sfondo.mp4"</span> <span class="na">data-background-video-loop</span> <span class="na">data-background-video-muted</span> <span class="na">data-background-opacity=</span><span class="s">"0.2"</span><span class="nt">&gt;</span>
</code></pre></div></div> <p>you need to add the video (in this case ‘sfondo.mp4’) in the same folder of the presentation.</p> <p>You can animate the histogram this way</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;section</span> <span class="na">data-auto-animate</span> <span class="na">data-auto-animate-easing=</span><span class="s">"cubic-bezier(0.770, 0.000, 0.175, 1.000)"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;h3&gt;</span>Taking Data..<span class="nt">&lt;/h3&gt;</span>
                    <span class="nt">&lt;div</span>  <span class="na">id=</span><span class="s">'histo'</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;script&gt;</span>
                            <span class="kd">var</span> <span class="nx">gal</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nf">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">histo</span><span class="dl">'</span><span class="p">);</span>
                            <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">gal</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">+=</span> <span class="dl">'</span><span class="s1">&lt;div data-id="box</span><span class="dl">'</span><span class="o">+</span><span class="nx">i</span><span class="o">+</span><span class="dl">'</span><span class="s1">" data-auto-animate-delay="0" style="background: white; position: absolute; width: 15px; height: 10px; margin: 10px; left:</span><span class="dl">'</span><span class="o">+</span><span class="nx">i</span><span class="o">*</span><span class="mi">10</span><span class="o">+</span><span class="dl">'</span><span class="s1">px; bottom:-500px;"&gt;&lt;/div&gt;</span><span class="dl">'</span><span class="p">;</span>
                            <span class="p">};</span>
                        <span class="nt">&lt;/script&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">data-id=</span><span class="s">"box"</span> <span class="na">data-auto-animate-delay=</span><span class="s">"0"</span> <span class="na">style=</span><span class="s">"background: black; position: absolute; width: 1050px; height: 3px; margin: 10px; left:0px; bottom:-502px;"</span><span class="nt">&gt;&lt;/div&gt;</span>

                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/section&gt;</span>
                <span class="nt">&lt;section</span> <span class="na">data-auto-animate</span> <span class="na">data-auto-animate-easing=</span><span class="s">"cubic-bezier(0.770, 0.000, 0.175, 1.000)"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;h3&gt;</span>..will the excess stay..<span class="nt">&lt;/h3&gt;</span>

                    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">'histo2'</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;script&gt;</span>
                            <span class="kd">var</span> <span class="nx">gal</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nf">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">histo2</span><span class="dl">'</span><span class="p">);</span>
                            <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                                <span class="c1">// var value = 100 +100*Math.random() ;</span>
                                <span class="kd">var</span> <span class="nx">baseline</span> <span class="o">=</span> <span class="mi">50</span> <span class="o">+</span><span class="mi">100</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nf">random</span><span class="p">();</span>
                                <span class="kd">var</span> <span class="nx">gaussian</span> <span class="o">=</span> <span class="mi">100</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nf">pow</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">E</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nf">pow</span><span class="p">(</span><span class="nx">i</span><span class="o">-</span><span class="mi">70</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="mi">10</span><span class="o">*</span><span class="mi">10</span><span class="p">));</span> 
                                <span class="kd">var</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">baseline</span> <span class="o">+</span>  <span class="nx">gaussian</span><span class="p">;</span>
                                <span class="kd">var</span> <span class="nx">redd</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span> <span class="o">-</span> <span class="nx">gaussian</span><span class="p">);</span>
                                <span class="nx">gal</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">+=</span> <span class="dl">'</span><span class="s1">&lt;div data-id="box</span><span class="dl">'</span><span class="o">+</span><span class="nx">i</span><span class="o">+</span><span class="dl">'</span><span class="s1">" data-auto-animate-delay="</span><span class="dl">'</span><span class="o">+</span><span class="nx">i</span><span class="o">/</span><span class="mi">40</span><span class="o">+</span><span class="dl">'</span><span class="s1">" style="background: rgb(255,</span><span class="dl">'</span><span class="o">+</span> <span class="nx">redd</span> <span class="o">+</span><span class="dl">'</span><span class="s1">,</span><span class="dl">'</span><span class="o">+</span><span class="nx">redd</span><span class="o">+</span><span class="dl">'</span><span class="s1">) ;position: absolute; width: 15px; height: </span><span class="dl">'</span><span class="o">+</span><span class="nx">value</span><span class="o">+</span><span class="dl">'</span><span class="s1">px; margin: 10px; left:</span><span class="dl">'</span><span class="o">+</span><span class="nx">i</span><span class="o">*</span><span class="mi">10</span><span class="o">+</span><span class="dl">'</span><span class="s1">px; bottom:-500px;"&gt;&lt;/div&gt;</span><span class="dl">'</span><span class="p">;</span>
                            <span class="p">};</span>
                        <span class="nt">&lt;/script&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">data-id=</span><span class="s">"box"</span> <span class="na">data-auto-animate-delay=</span><span class="s">"0"</span> <span class="na">style=</span><span class="s">"background: black; position: absolute; width: 1050px; height: 3px; margin: 10px; left:0px; bottom:-502px;"</span><span class="nt">&gt;&lt;/div&gt;</span>

                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/section&gt;</span>
</code></pre></div></div> <p>You can see the histogram growing in the second slide. Also apologies to the statistics aficionados out there - wanted to make something more good-looking. The JavaScript is used to make the code for a box for each binning.</p> <p>Reveal also natively support Latex:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>                    <span class="nt">&lt;small&gt;&lt;p&gt;</span>
                        Likelihood is the core description of the statistical processes <span class="nt">&lt;br&gt;</span>
                        $$ \mathcal{L}(\text{data}|\mu,\theta) = \prod_{i \in bins} \mathcal{P}(\text{data}_i | \mu \cdot S_i(\theta)+B_i(\theta)) $$
                    <span class="nt">&lt;/p&gt;</span>
                    <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"fragment"</span><span class="nt">&gt;</span>
                        $\mu \cdot S_i(\theta)+B_i(\theta)$ is the prediction of the events in the bin $i$ <span class="nt">&lt;br&gt;</span>
                        data$_i$ is the number of observed events in the bin $i$
                    <span class="nt">&lt;/p&gt;&lt;/small&gt;</span>
                    <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"fragment"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"pics/fittedlorentz1.png"</span> <span class="na">width=</span><span class="s">"450"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/p&gt;</span>
</code></pre></div></div> <p>Provided that you include this at the end:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"dist/reveal.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
		<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"plugin/notes/notes.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
		<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"plugin/markdown/markdown.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
		<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"plugin/highlight/highlight.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"plugin/zoom/zoom.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"plugin/math/math.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
		<span class="nt">&lt;script&gt;</span>
			<span class="c1">// More info about initialization &amp; config:</span>
			<span class="c1">// - https://revealjs.com/initialization/</span>
			<span class="c1">// - https://revealjs.com/config/</span>
			<span class="nx">Reveal</span><span class="p">.</span><span class="nf">initialize</span><span class="p">({</span>
				<span class="na">hash</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="na">slideNumber</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="na">center</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="na">mathjax2</span><span class="p">:</span> <span class="p">{</span>
                    <span class="na">mathjax</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js</span><span class="dl">'</span><span class="p">,</span>
                    <span class="na">config</span><span class="p">:</span> <span class="dl">'</span><span class="s1">TeX-AMS_HTML-full</span><span class="dl">'</span><span class="p">,</span>
                    <span class="c1">// pass other options into `MathJax.Hub.Config()`</span>
                    <span class="na">tex2jax</span><span class="p">:</span> <span class="p">{</span>
                    <span class="na">inlineMath</span><span class="p">:</span> <span class="p">[</span> <span class="p">[</span> <span class="dl">'</span><span class="s1">$</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">$</span><span class="dl">'</span> <span class="p">],</span> <span class="p">[</span> <span class="dl">'</span><span class="se">\\</span><span class="s1">(</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="se">\\</span><span class="s1">)</span><span class="dl">'</span> <span class="p">]</span> <span class="p">],</span>
                    <span class="na">skipTags</span><span class="p">:</span> <span class="p">[</span> <span class="dl">'</span><span class="s1">script</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">noscript</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">style</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">textarea</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">pre</span><span class="dl">'</span> <span class="p">]</span>
                    <span class="p">}</span>
                <span class="p">},</span>
				<span class="c1">// Learn about plugins: https://revealjs.com/plugins/</span>
                <span class="c1">// plugins: [ RevealZoom, RevealMarkdown, RevealHighlight, RevealNotes, RevealMath.KaTeX ]</span>
				<span class="na">plugins</span><span class="p">:</span> <span class="p">[</span> <span class="nx">RevealZoom</span><span class="p">,</span> <span class="nx">RevealMarkdown</span><span class="p">,</span> <span class="nx">RevealHighlight</span><span class="p">,</span> <span class="nx">RevealNotes</span><span class="p">,</span> <span class="nx">RevealMath</span><span class="p">.</span><span class="nx">MathJax2</span> <span class="p">]</span>
			<span class="p">});</span>
            <span class="nx">Reveal</span><span class="p">.</span><span class="nf">configure</span><span class="p">({</span> <span class="na">pdfMaxPagesPerSlide</span><span class="p">:</span> <span class="mi">1</span> <span class="p">})</span>
            <span class="nx">Reveal</span><span class="p">.</span><span class="nf">configure</span><span class="p">({</span> <span class="na">pdfSeparateFragments</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>
		<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div> <p>The fragment class is used to make appear the text and the image one after the other.</p> <p>As you see this file is ~1.5k lines of code alone, but is basically a simulation living in the browser. If you want to make a presentation with a lot of animations, transitions, and interactive plots, I think this is the way to go. For easier use cases - no complex animations, the code to write will be much less.</p> <p>That’s it for now, I hope you find this useful.</p> <p>Cheers,</p>]]></content><author><name></name></author><category term="sample-posts"/><category term="useful"/><summary type="html"><![CDATA[Reveal.js presentations are a great way to present your work]]></summary></entry></feed>